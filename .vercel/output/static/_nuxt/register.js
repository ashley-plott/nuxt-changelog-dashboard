import{g,r as l,c as f,a as s,k as p,l as v,v as m,m as a,p as c,t as x,n as w,o as y}from"./entry.js";const h={class:"min-h-screen flex items-center justify-center p-6 bg-gray-50"},k={class:"w-full max-w-sm rounded-2xl border bg-white p-6 shadow-sm"},C={class:"space-y-3"},_=["disabled"],V={key:0,class:"text-red-600 text-sm"},T=g({__name:"register",setup(B){const o=l(""),n=l(""),r=l(""),d=l(null),i=l(!1);async function b(){i.value=!0,d.value=null;try{return await $fetch("/api/auth/register",{method:"POST",body:{email:o.value,name:n.value,password:r.value}}),w("/dashboard")}catch(u){d.value=u?.data?.message||u?.message||"Register failed"}finally{i.value=!1}}return(u,e)=>(y(),f("div",h,[s("div",k,[e[4]||(e[4]=s("h1",{class:"text-xl font-semibold mb-4"},"Create admin",-1)),e[5]||(e[5]=s("p",{class:"text-xs text-gray-600 mb-4"},"If any user already exists, only admins can create more.",-1)),s("div",C,[p(s("input",{"onUpdate:modelValue":e[0]||(e[0]=t=>c(o)?o.value=t:null),type:"email",placeholder:"Email",class:"border rounded px-3 py-2 w-full"},null,512),[[m,a(o)]]),p(s("input",{"onUpdate:modelValue":e[1]||(e[1]=t=>c(n)?n.value=t:null),placeholder:"Name",class:"border rounded px-3 py-2 w-full"},null,512),[[m,a(n)]]),p(s("input",{"onUpdate:modelValue":e[2]||(e[2]=t=>c(r)?r.value=t:null),type:"password",placeholder:"Password (min 8)",class:"border rounded px-3 py-2 w-full"},null,512),[[m,a(r)]]),s("button",{onClick:b,disabled:a(i),class:"w-full px-4 py-2 rounded bg-black text-white"},x(a(i)?"Creatingâ€¦":"Create account"),9,_),a(d)?(y(),f("p",V,x(a(d)),1)):v("",!0),e[3]||(e[3]=s("p",{class:"text-xs text-gray-500"},"You will be signed in automatically.",-1))])])]))}});export{T as default};
